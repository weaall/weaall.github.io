3:I[5613,[],""]
5:I[1778,[],""]
6:I[7709,["229","static/chunks/229-125a0445ef9a59b1.js","250","static/chunks/250-e1cebaeae1771402.js","185","static/chunks/app/layout-fb3eab3df5ad94db.js"],""]
7:I[8667,["160","static/chunks/app/not-found-817c2752032c2711.js"],""]
4:["slug","nextjs-mdx","d"]
0:["cpoZ_OKP-KxhFzpGbwgns",[[["",{"children":["(pages)",{"children":["shallow",{"children":[["slug","nextjs-mdx","d"],{"children":["__PAGE__?{\"slug\":\"nextjs-mdx\"}",{}]}]}]}]},"$undefined","$undefined",true],["",{"children":["(pages)",{"children":["shallow",{"children":[["slug","nextjs-mdx","d"],{"children":["__PAGE__",{},["$L1","$L2",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(pages)","children","shallow","children","$4","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(pages)","children","shallow","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(pages)","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,["$","html",null,{"lang":"kr","children":[["$","head",null,{"children":[["$","meta",null,{"name":"naver-site-verification","content":"e782934088f4524e1d46947402328d9864f04318"}],["$","meta",null,{"name":"google-site-verification","content":"EB5qLPhkvA7mD6Yz6VpiZaMErWP4KIB7Aj_rR-xqdsA"}],["$","link",null,{"rel":"icon","href":"/favicon.ico"}]]}],["$","body",null,{"className":"__className_a1b02f","children":["$","div",null,{"children":[["$","div",null,{"children":[["$","$L6",null,{}],["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","$L7",null,{}],"notFoundStyles":[],"styles":null}]],"style":{},"className":"mx-auto max-w-[1080px] h-auto px-1"}],["$","div",null,{"children":[["$","div",null,{"children":[["$","div",null,{"children":[["$","img",null,{"alt":"","src":"../../assets/favicon.png","style":{},"className":"w-10 mobile:mx-auto"}],["$","p",null,{"className":"font-semibold text-main/[0.8] text-lg py-2 mobile:mx-auto __className_22ceb1","children":"Dong-Hyun Wi","style":{}}],["$","p",null,{"children":"더 나은 것을 만들어내기 위해 끊임없이 고민하며 나아갑니다.","style":{},"className":"text-xs py-0.5 mobile:mx-auto"}],["$","p",null,{"children":"복잡함 속에서도 효과적인 구조를 위해 노력합니다.","style":{},"className":"text-xs py-0.5 mobile:mx-auto"}]],"style":{},"className":"flex flex-col text-left items-start w-[50%] mobile:w-full mobile:justify-center mobile:mx-auto mobile:text-center"}],["$","div",null,{"className":"flex justify-end space-x-16 w-[50%] mobile:w-full mobile:justify-center mobile:mx-auto mobile:pb-10 __className_22ceb1","children":[["$","div",null,{"children":[["$","label",null,{"children":"WEAALL","style":{},"className":"text-xs font-semibold"}],["$","a",null,{"href":"/","children":"Home","style":{},"className":"text-xs"}],["$","a",null,{"href":"/me","children":"Me","style":{},"className":"text-xs"}]],"style":{},"className":"flex flex-col space-y-2.5 text-left"}],["$","div",null,{"children":[["$","label",null,{"children":"POST","style":{},"className":"text-xs font-semibold"}],["$","a",null,{"href":"/shallow","children":"Shallow Dive","style":{},"className":"text-xs"}],["$","a",null,{"href":"/deep","children":"Deep Dive","style":{},"className":"text-xs"}],["$","a",null,{"href":"/prac","children":"Practice","style":{},"className":"text-xs"}]],"style":{},"className":"flex flex-col space-y-2.5 text-left"}],["$","div",null,{"children":[["$","label",null,{"children":"TRAVELO","style":{},"className":"text-xs font-semibold"}],["$","a",null,{"href":"https://travelo.store/","children":"Web","style":{},"className":"text-xs"}],["$","a",null,{"href":"/dev/intro","children":"Dev","style":{},"className":"text-xs"}]],"style":{},"className":"flex flex-col space-y-2.5 text-left"}]],"style":{}}]],"style":{},"className":"flex max-w-[1080px] h-full pb-10 border-t pt-16 mobile:flex-col-reverse"}],["$","div",null,{"children":[["$","a",null,{"className":"w-9 h-9","href":"https://github.com/weaall","target":"_blank","rel":"noopener noreferrer","children":["$","img",null,{"alt":"","src":"../../assets/footer/github.png","style":{},"className":"w-full h-full"}],"style":{}}],["$","a",null,{"href":"https://www.instagram.com/wea_all/","target":"_blank","rel":"noopener noreferrer","children":["$","img",null,{"alt":"","src":"../../assets/footer/instagram.png","style":{},"className":"w-full h-full"}],"style":{},"className":"w-5 h-5"}],["$","a",null,{"className":"w-7 h-7","href":"https://travelo.store/","target":"_blank","rel":"noopener noreferrer","children":["$","img",null,{"alt":"","src":"../../assets/footer/travelo.png","style":{},"className":"w-full h-full"}],"style":{}}]],"style":{},"className":"flex border-t border-main/[0.6] w-full py-6 justify-end items-center space-x-6"}]],"style":{},"className":"flex flex-col w-full h-full mt-10 text-main/[0.6] pt-4 px-10 select-none mobile:px-12"}]],"style":{},"className":"mx-auto text-main max-w-[1080px]"}]}]]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/6a5f3c35560f6327.css","precedence":"next","crossOrigin":""}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/4837ad08e76e29b1.css","precedence":"next","crossOrigin":""}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/ddde74edfda614e9.css","precedence":"next","crossOrigin":""}]],"$L8"]]]]
9:I[9275,["229","static/chunks/229-125a0445ef9a59b1.js","624","static/chunks/624-820220bab49ef968.js","101","static/chunks/app/(pages)/shallow/%5Bslug%5D/page-3500f5374e655c88.js"],"MDXContent"]
a:I[2946,["229","static/chunks/229-125a0445ef9a59b1.js","624","static/chunks/624-820220bab49ef968.js","101","static/chunks/app/(pages)/shallow/%5Bslug%5D/page-3500f5374e655c88.js"],"H3"]
b:I[2946,["229","static/chunks/229-125a0445ef9a59b1.js","624","static/chunks/624-820220bab49ef968.js","101","static/chunks/app/(pages)/shallow/%5Bslug%5D/page-3500f5374e655c88.js"],"Pre"]
c:I[2946,["229","static/chunks/229-125a0445ef9a59b1.js","624","static/chunks/624-820220bab49ef968.js","101","static/chunks/app/(pages)/shallow/%5Bslug%5D/page-3500f5374e655c88.js"],"Code"]
e:I[2946,["229","static/chunks/229-125a0445ef9a59b1.js","624","static/chunks/624-820220bab49ef968.js","101","static/chunks/app/(pages)/shallow/%5Bslug%5D/page-3500f5374e655c88.js"],"Hr"]
d:Tb6f,import { compileMDX } from "next-mdx-remote/rsc";
import path from "path";
import { readFile, access, readdir } from "fs/promises";
import {
    Hr,
    H1,
    H2,
    Code,
    Strong,
    Pre,
    H3,
    A,
    Li,
    Em,
    Img,
    Table,
    Thead,
    Tbody,
    Tr,
    Th,
    Td,
} from "@/components/mdx/mdx-components/components";
import { notFound } from "next/navigation";
import { Metadata } from "next";
import remarkGfm from "remark-gfm";
import { MDXContent } from "@/components/mdx/mdx-content/MDXContent";

interface PostData {
    imageUrl: string;
    label: string;
    title: string;
    subTitle: string;
    date: string;
    tags: [];
    mins: string;
}

const POSTS_FOLDER = path.join(process.cwd(), "posts/deep");

export const generateStaticParams = async () => {
    try {
        const files = await readdir(POSTS_FOLDER);
        const posts = files.filter((file) => file.endsWith(".mdx")).map((file) => file.replace(/\.mdx$/, ""));
        
        return posts.map((post) => ({
            slug: post,
        }));
    } catch (error) {
        console.error("Error reading posts folder:", error);
        return [];
    }
};

async function readPostFile(slug: string) {
    const filePath = path.resolve(path.join(POSTS_FOLDER, `${slug}.mdx`));

    try {
        await access(filePath);
        return await readFile(filePath, { encoding: "utf8" });
    } catch (err) {
        return null;
    }
}

async function compilePostMarkdown(slug: string) {
    const markdown = await readPostFile(slug);

    if (!markdown) {
        notFound();
    }

    return compileMDX<PostData>({
        source: markdown,
        options: {
            parseFrontmatter: true,
            mdxOptions: {
                remarkPlugins: [remarkGfm],
            },
        },
        components: {
            h1: H1,
            h2: H2,
            h3: H3,
            a: A,
            li: Li,
            hr: Hr,
            pre: Pre,
            code: Code,
            strong: Strong,
            em: Em,
            img: Img,
            table: Table,
            thead: Thead,
            tbody: Tbody,
            tr: Tr,
            th: Th,
            td: Td,
        },
    });
}

export default async function PostPage({ params }: { params: { slug: string } }) {
    const { content, frontmatter } = await compilePostMarkdown(params.slug);

    return (
        <>
            <MDXContent content={content} frontmatter={frontmatter} />
        </>
    );
}

export async function generateMetadata({ params }: { params: { slug: string } }): Promise<Metadata> {
    const { frontmatter } = await compilePostMarkdown(params.slug);

    const metadata: Metadata = {
        title: frontmatter.title,
        description: frontmatter.subTitle,
    };

    return metadata;
}

2:["$","$L9",null,{"content":[["$","$La",null,{"children":"App Router 디렉토리 구조"}],"\n",["$","$Lb",null,{"children":["$","$Lc",null,{"className":"language-Directory","children":"/posts\r\n    /board\r\n/src\r\n    /app\r\n        /(pages)\r\n            /board\r\n                page.tsx\r\n                /[slug]\r\n                    page.tsx\n"}]}],"\n",["$","$La",null,{"children":"./board/page.tsx"}],"\n",["$","$Lb",null,{"children":["$","$Lc",null,{"className":"language-typescript","children":"$d"}]}],"\n",["$","$Le",null,{}]],"frontmatter":{"label":"NextJS","title":"App Router에서 MDX [slug]를 통해 정적페이지 만들기","subTitle":"mdx로 정적페이지 생성 , generateStaticParams error 해결","date":"2024.05.01","mins":10,"tags":["NextJS","App Router","slug","mdx","generateStaticParams"],"imageUrl":"/posts/shallow/nextjs/nextjs.svg"}}]
8:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"App Router에서 MDX [slug]를 통해 정적페이지 만들기"}],["$","meta","3",{"name":"description","content":"mdx로 정적페이지 생성 , generateStaticParams error 해결"}],["$","meta","4",{"name":"keywords","content":"NextJS, App Router, slug, mdx, generateStaticParams"}],["$","link","5",{"rel":"canonical","href":"https://weaall.github.io/nextjs-mdx"}],["$","meta","6",{"property":"og:title","content":"App Router에서 MDX [slug]를 통해 정적페이지 만들기"}],["$","meta","7",{"property":"og:description","content":"mdx로 정적페이지 생성 , generateStaticParams error 해결"}],["$","meta","8",{"property":"og:url","content":"https://weaall.github.io/nextjs-mdx"}],["$","meta","9",{"property":"og:site_name","content":"Weaall's Dive"}],["$","meta","10",{"property":"og:locale","content":"ko_KR"}],["$","meta","11",{"property":"og:image","content":"https://weaall.github.io/posts/shallow/nextjs/nextjs.svg"}],["$","meta","12",{"property":"og:image:alt","content":"App Router에서 MDX [slug]를 통해 정적페이지 만들기"}],["$","meta","13",{"property":"og:type","content":"article"}],["$","meta","14",{"property":"article:published_time","content":"2024-04-30T15:00:00.000Z"}],["$","meta","15",{"property":"article:author","content":"https://github.com/weaall"}],["$","meta","16",{"property":"article:tag","content":"NextJS"}],["$","meta","17",{"property":"article:tag","content":"App Router"}],["$","meta","18",{"property":"article:tag","content":"slug"}],["$","meta","19",{"property":"article:tag","content":"mdx"}],["$","meta","20",{"property":"article:tag","content":"generateStaticParams"}],["$","meta","21",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","22",{"name":"twitter:title","content":"App Router에서 MDX [slug]를 통해 정적페이지 만들기"}],["$","meta","23",{"name":"twitter:description","content":"mdx로 정적페이지 생성 , generateStaticParams error 해결"}],["$","meta","24",{"name":"twitter:image","content":"https://weaall.github.io/posts/shallow/nextjs/nextjs.svg"}],["$","meta","25",{"name":"twitter:image:alt","content":"App Router에서 MDX [slug]를 통해 정적페이지 만들기"}],["$","link","26",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}]]
1:null
