3:I[5613,[],""]
5:I[1778,[],""]
6:I[7709,["229","static/chunks/229-9d8f69c46fe74846.js","396","static/chunks/396-67972dd1b50a4c2d.js","185","static/chunks/app/layout-82c027de723f18fe.js"],""]
7:I[8667,["160","static/chunks/app/not-found-50c5c2993e985d24.js"],""]
4:["slug","deep-nextjs-mdx","d"]
0:["wOiUy-njcbn3E6JrhcTii",[[["",{"children":["(pages)",{"children":["deep",{"children":[["slug","deep-nextjs-mdx","d"],{"children":["__PAGE__?{\"slug\":\"deep-nextjs-mdx\"}",{}]}]}]}]},"$undefined","$undefined",true],["",{"children":["(pages)",{"children":["deep",{"children":[["slug","deep-nextjs-mdx","d"],{"children":["__PAGE__",{},["$L1","$L2",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(pages)","children","deep","children","$4","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(pages)","children","deep","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(pages)","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,["$","html",null,{"lang":"kr","children":[["$","head",null,{"children":[["$","meta",null,{"name":"naver-site-verification","content":"e782934088f4524e1d46947402328d9864f04318"}],["$","meta",null,{"name":"google-site-verification","content":"EB5qLPhkvA7mD6Yz6VpiZaMErWP4KIB7Aj_rR-xqdsA"}],["$","link",null,{"rel":"icon","href":"/favicon.ico"}]]}],["$","body",null,{"className":"__className_a1b02f","children":["$","div",null,{"children":[["$","div",null,{"children":[["$","$L6",null,{}],["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","$L7",null,{}],"notFoundStyles":[],"styles":null}]],"style":{},"className":"mx-auto max-w-[1080px] h-auto px-1"}],["$","div",null,{"children":["$","div",null,{"children":[["$","div",null,{"children":[["$","p",null,{"children":"Dong-Hyun Wi","style":{},"className":"font-bold text-2xl"}],["$","p",null,{"children":"weaall@naver.com","style":{},"className":"text-sm"}],["$","p",null,{"children":"weaall88@gmail.com","style":{},"className":"text-sm"}]],"style":{},"className":"flex flex-col m-auto text-center space-y-1 w-[33%]"}],["$","div",null,{"children":["$","img",null,{"alt":"","src":"../../assets/svg/user_icon.svg","style":{},"className":"w-8 h-full m-auto group-hover:scale-110"}],"style":{},"className":"flex flex-col m-auto text-center space-y-1 w-[33%]"}],["$","div",null,{"children":[["$","a",null,{"href":"/","children":"Main","style":{},"className":"font-bold text-base"}],["$","a",null,{"href":"/shallow","children":"Shallow","style":{},"className":"font-bold text-base"}],["$","a",null,{"href":"/deep","children":"Deep","style":{},"className":"font-bold text-base"}],["$","a",null,{"href":"/me","children":"Me","style":{},"className":"font-bold text-base"}]],"style":{},"className":"flex m-auto space-x-4 w-[33%] justify-center"}]],"style":{},"className":"mx-auto max-w-[1080px] h-40 justify-between flex mobile:flex-col mobile:h-52"}],"style":{},"className":"w-full border-t mt-20 text-text-main"}]],"style":{},"className":"mx-auto text-main max-w-[1080px]"}]}]]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/6a5f3c35560f6327.css","precedence":"next","crossOrigin":""}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/4991be7c2272f5ae.css","precedence":"next","crossOrigin":""}]],"$L8"]]]]
9:I[9275,["229","static/chunks/229-9d8f69c46fe74846.js","624","static/chunks/624-4978480c88762741.js","606","static/chunks/app/(pages)/deep/%5Bslug%5D/page-0f8f53d5c22a66de.js"],"MDXContent"]
a:I[2946,["229","static/chunks/229-9d8f69c46fe74846.js","624","static/chunks/624-4978480c88762741.js","606","static/chunks/app/(pages)/deep/%5Bslug%5D/page-0f8f53d5c22a66de.js"],"H3"]
b:I[2946,["229","static/chunks/229-9d8f69c46fe74846.js","624","static/chunks/624-4978480c88762741.js","606","static/chunks/app/(pages)/deep/%5Bslug%5D/page-0f8f53d5c22a66de.js"],"Pre"]
c:I[2946,["229","static/chunks/229-9d8f69c46fe74846.js","624","static/chunks/624-4978480c88762741.js","606","static/chunks/app/(pages)/deep/%5Bslug%5D/page-0f8f53d5c22a66de.js"],"Code"]
e:I[2946,["229","static/chunks/229-9d8f69c46fe74846.js","624","static/chunks/624-4978480c88762741.js","606","static/chunks/app/(pages)/deep/%5Bslug%5D/page-0f8f53d5c22a66de.js"],"Hr"]
d:T78b,import path from "path";
import { readFile, access, readdir } from "fs/promises";

import { compileMDX } from "next-mdx-remote/rsc";
import { notFound } from "next/navigation";

import { MDXContent } from "@/components/mdx/mdx-content/MDXContent";
import { Hr, H1, H2, P, Code, Strong, Pre, H3, CheckBoxF, CheckBoxT, A, Li, Em, Img } from "@/components/mdx/mdx-components/components";

const POSTS_FOLDER = path.join(process.cwd(), "posts/borad")

export const generateStaticParams = async () => {
    const files = await readdir(POSTS_FOLDER)
    const posts = files.filter((file) => file.endsWith(".mdx")).map((file) => file.replace(/\.mdx$/, ""))

    return posts.map((post) => ({
        slug: post,
    }))
}

async function readPostFile(slug: string) {
    const filePath = path.resolve(path.join(POSTS_FOLDER, `${slug}.mdx`))

    try {
        await access(filePath)
        return await readFile(filePath, { encoding: "utf8" })
    } catch (err) {
        return null
    }
}

async function compilePostMarkdown(slug: string) {
    const markdown = await readPostFile(slug)

    if (!markdown) {
        notFound()
    }

    return compileMDX<PostData>({
        source: markdown,
        options: { parseFrontmatter: true },
        components: {
            h1: H1,
            h2: H2,
            h3: H3,
            h4: CheckBoxT,
            h5: CheckBoxF,
            p: P,
            a: A,
            li: Li,
            hr: Hr,
            pre: Pre,
            code: Code,
            strong: Strong,
            em: Em,
            img: Img,
        },
    })
}

export default async function PostPage({ params }: { params: { slug: string } }) {
    const { content, frontmatter } = await compilePostMarkdown(params.slug)

    return (
        <>
            <MDXContent content={content} frontmatter={frontmatter}  />
        </>
    )
} 
2:["$","$L9",null,{"content":[["$","$La",null,{"children":"App Router 디렉토리 구조"}],"\n",["$","$Lb",null,{"children":["$","$Lc",null,{"className":"language-Directory","children":"/posts\r\n    /board\r\n/src\r\n    /app\r\n        /(pages)\r\n            /board\r\n                page.tsx\r\n                /[slug]\r\n                    page.tsx\n"}]}],"\n",["$","$La",null,{"children":"./board/page.tsx"}],"\n",["$","$Lb",null,{"children":["$","$Lc",null,{"className":"language-typescript","children":"import getPostsData from \"@/components/mdx/getMdx\"\r\nimport PostList from \"@/components/posts-list/PostList\"\r\n\r\nexport default async function Page() {\r\n    const postsData = await getPostsData(\"deep\")\r\n    const sortedPostsData = postsData.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\r\n\r\n    return (\r\n        <>\r\n            <PostList props={sortedPostsData} />\r\n        </>\r\n    )\r\n}\n"}]}],"\n",["$","$La",null,{"children":"./[slug]/page.tsx"}],"\n",["$","$Lb",null,{"children":["$","$Lc",null,{"className":"language-typescript","children":"$d"}]}],"\n",["$","$Le",null,{}]],"frontmatter":{"label":"NextJS","title":"App Router에서 MDX [slug]를 통해 정적페이지 만들기","subTitle":"mdx로 정적페이지 생성 , generateStaticParams error 해결","date":"2024.05.01","mins":10,"tags":["NextJS","App Router","slug","mdx","generateStaticParams"],"imageUrl":null}}]
8:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"App Router에서 MDX [slug]를 통해 정적페이지 만들기"}],["$","meta","3",{"name":"description","content":"mdx로 정적페이지 생성 , generateStaticParams error 해결"}],["$","link","4",{"rel":"canonical","href":"https://weaall.github.io/"}],["$","meta","5",{"property":"og:title","content":"Weaall's Dive"}],["$","meta","6",{"property":"og:description","content":"Weaall's pretty personal idea"}],["$","meta","7",{"property":"og:url","content":"https://weaall.github.io/"}],["$","meta","8",{"property":"og:site_name","content":"Weaall's Dive"}],["$","meta","9",{"property":"og:image","content":"https://weaall.github.io/profile.png"}],["$","meta","10",{"property":"og:image:alt","content":"Weaall's Dive"}],["$","meta","11",{"property":"og:type","content":"website"}],["$","meta","12",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","13",{"name":"twitter:title","content":"Weaall's Dive"}],["$","meta","14",{"name":"twitter:description","content":"Weaall's pretty personal idea"}],["$","meta","15",{"name":"twitter:image","content":"https://weaall.github.io/profile.png"}],["$","meta","16",{"name":"twitter:image:alt","content":"Weaall's Dive"}],["$","link","17",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}]]
1:null
